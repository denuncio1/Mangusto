{
  "openapi": "3.0.0",
  "info": {
    "title": "Normas, Favoritos e Anotações API",
    "version": "1.0.0"
  },
  "paths": {
    "/normas": {
      "get": {
        "summary": "Listar todas as normas",
        "responses": {
          "200": {
            "description": "Lista de normas",
            "content": { "application/json": { "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Norma" } } } }
          }
        }
      }
    },
    "/normas/{id}": {
      "get": {
        "summary": "Obter detalhes de uma norma",
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": { "200": { "description": "Norma", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Norma" } } } } }
      }
    },
    "/favoritos": {
      "get": {
        "summary": "Listar favoritos do usuário autenticado",
        "responses": { "200": { "description": "IDs das normas favoritas", "content": { "application/json": { "schema": { "type": "array", "items": { "type": "string" } } } } } }
      },
      "post": {
        "summary": "Adicionar norma aos favoritos",
        "requestBody": { "content": { "application/json": { "schema": { "type": "object", "properties": { "normaId": { "type": "string" } } } } } },
        "responses": { "200": { "description": "Favorito adicionado" } }
      },
      "delete": {
        "summary": "Remover norma dos favoritos",
        "requestBody": { "content": { "application/json": { "schema": { "type": "object", "properties": { "normaId": { "type": "string" } } } } } },
        "responses": { "200": { "description": "Favorito removido" } }
      }
    },
    "/anotacoes": {
      "get": {
        "summary": "Listar anotações do usuário autenticado",
        "responses": { "200": { "description": "Anotações por normaId", "content": { "application/json": { "schema": { "type": "object", "additionalProperties": { "type": "string" } } } } } }
      },
      "post": {
        "summary": "Salvar/atualizar anotação",
        "requestBody": { "content": { "application/json": { "schema": { "type": "object", "properties": { "normaId": { "type": "string" }, "texto": { "type": "string" } } } } } },
        "responses": { "200": { "description": "Anotação salva" } }
      }
    }
  },
  "components": {
    "schemas": {
      "Norma": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "codigo": { "type": "string" },
          "titulo": { "type": "string" },
          "versao": { "type": "string" },
          "data_atualizacao": { "type": "string", "format": "date" },
          "texto_integra": { "type": "string" },
          "texto_resumido": { "type": "string" },
          "tags": { "type": "array", "items": { "type": "string" } }
        }
      }
    }
  }
}
